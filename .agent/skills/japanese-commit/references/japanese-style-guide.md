# 日本語コミットメッセージ スタイルガイド

## 基本原則

1. **読みやすさ**: 誰が見てもすぐに理解できる表現
2. **明確さ**: 何をしたのかが一目瞭然
3. **簡潔性**: 不要な言葉を避ける
4. **一貫性**: 同じパターンで繰り返す

## タイトル（1行目）

### ルール

- 30～50文字程度を目安に
- 句点（。）は付けない
- 何をしたかを簡潔に表現
- 命令形や説明形で書く

### 時制

タイトルは**現在形**を使用：

- ✅ 機能を追加
- ✅ バグを修正
- ✅ UIをリデザイン
- ✅ テストを実装

❌ 機能を追加した（過去形は避ける）

### 表現の選び方

**「を」で統一**：

- ✅ ユーザー認証を実装
- ✅ ページネーションを追加
- ✅ エラーハンドリングを改善

**具体的に**：

- ✅ ログイン画面のバリデーションを強化
- ❌ 画面を修正

- ✅ データベーススキーマをマイグレーション
- ❌ DB更新

**スコープを明記**：

- ✅ プロフィールページのヘッダーをリデザイン
- ❌ ヘッダーをリデザイン（どの部分か不明確）

### 避けるべき表現

| ❌ 避ける | ✅ 正しい |
|---------|---------|
| 修正 | 〇〇を修正 |
| 更新 | 〇〇を更新 |
| いろいろ修正 | 具体的に何を修正したか |
| wip | 実装完了後にコミット |
| fix stuff | 何を修正したか明記 |
| update | 何を更新したか明記 |
| とりあえず | 意図をはっきりさせる |

## 説明（2行目以降）

### 構造

```
[空行]
[何を変えたか]

[なぜそう変えたか]

[どうやって実装したか（必要な場合）]
```

### 説明の書き方

**過去形で詳細を説明**：

```
新しいダッシュボード画面を実装した。
```

**変更内容を具体的に列挙**：

```
主な変更：
- APIレスポンス形式を変更
- フロントエンドのデータフロー処理を修正
- テストケースを3件追加
```

**影響範囲を明記**：

```
この変更により、ユーザーがダッシュボードでリアルタイムデータを確認できるようになった。
```

## パターン別ガイド

### 機能追加

```
新しい〇〇機能を実装

ユーザーが〇〇できるようにした。
実装内容：
- 新しいコンポーネント「ComponentName」を作成
- APIエンドポイント /api/endpoint を追加
- UI デザインは Figma の仕様に従った
```

### バグ修正

```
〇〇のバグを修正

問題：[具体的な症状]
原因：[なぜそれが起こっていたか]
対策：[どうやって修正したか]

テスト済みで、本番環境での再現不可を確認した。
```

### リファクタリング

```
ComponentAとComponentBをリファクタリング

重複していたロジックを共通の utility 関数に抽出した。
機能・動作は変わらず、保守性が向上した。
```

### テスト追加

```
テストを追加：〇〇の機能テスト

以下のテストケースを追加した：
- 正常系：入力値が有効な場合
- 異常系：入力値が無効な場合
- 境界値：最大値・最小値での動作
```

### UI 変更

```
〇〇ページのUIをリデザイン

以下の要素を変更した：
- ヘッダーのレイアウトを修正
- ボタンの色とサイズを更新
- ダークモード対応を追加
```

### ドキュメント更新

```
README を更新：セットアップ手順

開発環境のセットアップ手順を詳しく追加した。
新しい開発者がすぐに開始できるようにした。
```

### 依存関係更新

```
パッケージをアップグレード：React 18.x対応

React を 17.0 から 18.2.0 にアップグレードした。
- 新しい Suspense 機能が使用可能に
- パフォーマンスが向上
- 既存のテストはすべてパス
```

## よくある間違い

### 1. タイトルが長すぎる

❌ 「ユーザーのプロフィールページを表示するコンポーネントを新しく作成し、API通信を追加して、エラーハンドリングも実装した」

✅ 「プロフィールページを実装」

> 詳細は説明部分に書く

### 2. 英語を混ぜる（不必要な場合）

❌ 「API endpoint を追加」
❌ 「Component をリファクタリング」

✅ 「APIエンドポイント /api/users を追加」
✅ 「UserProfileコンポーネントをリファクタリング」

> 固有名詞や製品名は英語でもOK（`React`, `TypeScript` など）

### 3. 理由を書かない

❌ 「バグを修正」

✅ 「ページネーション時のデータ欠落バグを修正」

### 4. 曖昧な表現

❌ 「いろいろ直した」
❌ 「細かい修正」

✅ 「ダークモード時のテキスト色をコントラスト基準に合わせて修正」

## チェックリスト

コミットする前に確認：

- [ ] タイトルは 30～50文字程度か
- [ ] タイトルに句点（。）はついていないか
- [ ] タイトルで何をしたか明確か
- [ ] 説明部分がある場合、過去形で詳細を書いているか
- [ ] 他人が読んで理解できるか
- [ ] 技術的すぎる表現になっていないか
- [ ] スコープが明確か

## 参考例

良いコミットメッセージの実例：

```
プロフィール画面を実装

ユーザーが自分のプロフィール情報を確認・編集できるページを追加した。

主な変更：
- ProfilePage コンポーネント作成
- GET /api/users/:id エンドポイント対応
- フォーム入力のバリデーション実装
- エラー状態時のユーザーフィードバック追加

ユーザーテスト済みで、基本的な操作が問題なく動作することを確認した。
```

```
ログイン失敗時のエラーメッセージを改善

問題：ネットワークエラーで空のメッセージが表示されていた
原因：エラーハンドリングで例外オブジェクトを正しく処理していなかった

対策：
- エラーオブジェクトから詳細メッセージを取得する処理を追加
- ネットワークエラーは「インターネット接続を確認してください」と表示
- サーバーエラーは「サーバーエラーが発生しました。しばらく待って再度試してください」と表示

手動テストで各エラーパターンが正しいメッセージを表示することを確認した。
```
