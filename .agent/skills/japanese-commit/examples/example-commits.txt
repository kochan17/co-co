====== 実際のコミットメッセージ例 ======

【例1】機能追加：ユーザープロフィール機能

コミットメッセージ：
---
ユーザープロフィール機能を実装

ユーザーが自分のプロフィール情報を確認・編集できるページを追加した。
実装内容：
- ProfilePage コンポーネントを作成（プロフィール表示・編集）
- GET /api/users/:id エンドポイント対応
- PUT /api/users/:id エンドポイント対応（プロフィール更新）
- フォーム入力値のバリデーション実装（メール形式、名前の長さなど）
- エラー状態時にユーザーにメッセージを表示

変更ファイル：
- src/pages/ProfilePage.tsx （新規作成）
- src/components/ProfileForm.tsx （新規作成）
- src/api/users.ts （修正：新しいAPIメソッド追加）
- src/styles/ProfilePage.css （新規作成）
---

変更内容：
$ git diff
- ProfilePage.tsx: +120 行（新規）
- ProfileForm.tsx: +80 行（新規）
- users.ts: +25 行（メソッド追加）
- ProfilePage.css: +60 行（新規）


【例2】バグ修正：ページネーションのデータ欠落

コミットメッセージ：
---
ページネーション時のデータ欠落バグを修正

問題：ユーザー一覧の2ページ目以降でデータが重複して表示されていた

原因：ページ番号の計算時にオフセットを二重に適用していた
  - 新しい API は既にオフセット処理をしているのに、フロントエンドでも適用していた

対策：
- DataFetcher.ts の offset 計算を削除
- ページネーション開始時の state 初期化を修正
- テストケースを3件追加して再発防止

変更ファイル：
- src/api/DataFetcher.ts （修正：offset処理を削除）
- src/pages/UserListPage.tsx （修正：state管理の修正）
- src/tests/UserListPage.test.tsx （追加：テストケース）
---

変更内容：
$ git diff
- DataFetcher.ts: -5 行（削除）、+2 行（修正）
- UserListPage.tsx: -8 行（削除）、+6 行（追加）
- UserListPage.test.tsx: +45 行（テスト追加）


【例3】UIリデザイン：ダークモード対応

コミットメッセージ：
---
ダークモード対応をサイト全体に追加

ユーザーのシステム設定に基づいてダークモード自動適用、
またはユーザーが手動で切り替えられるようにした。

実装内容：
- ThemeContext を作成（グローバル状態管理）
- useTheme カスタムフック実装
- CSS 変数を使用してカラースキーム管理
- localStorage に ユーザーの選択を保存
- プリファーカラースキーム検出機能実装

変更ファイル：
- src/context/ThemeContext.tsx （新規作成）
- src/hooks/useTheme.ts （新規作成）
- src/styles/theme-variables.css （新規作成）
- src/components/ThemeToggle.tsx （新規作成）
- src/App.tsx （修正：ThemeProvider でラップ）
- src/styles/global.css （修正：CSS変数を使用）

テスト状況：
- 全ページで ダークモード/ライトモード動作確認済み
- ブラウザダークモード設定との同期を確認
- 手動切り替えの動作確認済み
---

変更内容：
$ git diff
- ThemeContext.tsx: +85 行（新規）
- useTheme.ts: +35 行（新規）
- theme-variables.css: +120 行（新規）
- ThemeToggle.tsx: +50 行（新規）
- App.tsx: +10 行（修正）
- global.css: +30 行（修正）


【例4】テスト追加：認証ロジック

コミットメッセージ：
---
テストを追加：ユーザー認証ロジック

以下のテストケースを追加して、認証機能の品質を向上させた。

新しいテスト：
- 正常系：正しいメール・パスワードでログイン成功
- 異常系：メール形式が不正な場合はエラー表示
- 異常系：パスワードが短い場合はエラー表示
- 異常系：存在しないメールアドレスでログイン失敗
- 異常系：パスワードが間違っている場合はログイン失敗
- 境界値：パスワード最小文字数（8文字）のテスト
- セッション：ログイン後、セッショントークンが保存される
- セッション：セッション期限切れ後、自動ログアウト

カバレッジ：
- auth.ts: 95% → 100%
- AuthForm.tsx: 82% → 95%

変更ファイル：
- src/tests/auth.test.ts （修正：テストケース追加 +80行）
- src/tests/AuthForm.test.tsx （修正：テストケース追加 +65行）
---

変更内容：
$ git diff
- auth.test.ts: +80 行（テストケース追加）
- AuthForm.test.tsx: +65 行（テストケース追加）


【例5】リファクタリング：重複コードの抽出

コミットメッセージ：
---
複数コンポーネントの重複ロジックを抽出

DataFetcher、DataCache、ErrorHandler に重複していたロジックを
共通の utility 関数に抽出してコード整理した。

変更内容：
- fetchWithErrorHandling() を新しく作成
- キャッシュ検証ロジックを validateCache() に集約
- 3つのコンポーネントで重複していたコード（約50行）を削除

結果：
- コードの重複度が低下（DRY原則に準拠）
- バグ修正時の変更箇所が削減
- 機能・動作は完全に同じ（リグレッション確認済み）

変更ファイル：
- src/utils/apiHelpers.ts （修正：新しい関数を追加）
- src/api/DataFetcher.ts （修正：新しい関数を使用 -15行削除）
- src/api/DataCache.ts （修正：新しい関数を使用 -18行削除）
- src/services/ErrorHandler.ts （修正：新しい関数を使用 -12行削除）
- src/tests/apiHelpers.test.ts （新規作成：ユーティリティテスト）
---

変更内容：
$ git diff
- apiHelpers.ts: +45 行（関数追加）
- DataFetcher.ts: -15 行
- DataCache.ts: -18 行
- ErrorHandler.ts: -12 行
- apiHelpers.test.ts: +55 行（新規テスト）


【例6】ドキュメント更新

コミットメッセージ：
---
開発環境セットアップガイドをREADMEに追加

新しい開発者がすぐに開発を始められるようにセットアップ手順を詳しく追加した。

追加内容：
- Node.js・npm の推奨バージョン明記
- インストール手順（npm install）
- 環境変数ファイルの設定方法
- 開発サーバーの起動方法（npm run dev）
- よくあるトラブルシューティング
- VS Code推奨拡張機能リスト

変更ファイル：
- README.md （修正：セットアップガイドセクション追加）
---

変更内容：
$ git diff
- README.md: +120 行（セットアップガイド追加）


====== 3つの異なる変更を分割したコミット例 ======

背景：複数の異なる修正がある場合

【コミット1】認証システムの改善
---
ログイントークンの有効期限チェックを強化

トークン有効期限の判定ロジックを厳密にした。
従来は有効期限を超えていても若干の猶予があったが、
今後は厳密に期限切れを判定して、セッション再開を促す。

変更ファイル：
- src/auth/TokenValidator.ts （修正）
- src/tests/TokenValidator.test.ts （テスト追加）
---

【コミット2】ボタンコンポーネントのアクセシビリティ改善
---
ボタンコンポーネントのキーボード操作を改善

キーボードユーザーが Tab キーでボタンにフォーカスしやすいように対応した。
また、フォーカス状態のスタイル（アウトライン）を追加。

変更ファイル：
- src/components/Button.tsx （修正）
- src/components/Button.test.tsx （テスト追加）
- src/styles/Button.css （修正：フォーカス状態のスタイル追加）
---

【コミット3】API レスポンス形式のドキュメント更新
---
APIドキュメントを最新の仕様に更新

新しく追加された /api/reports エンドポイントの仕様をドキュメントに記載。
レスポンス形式、パラメータ、エラーコードなどを記載。

変更ファイル：
- docs/API.md （修正：新エンドポイント追加）
---

[各コミットが独立した、自己完結した変更として機能]
[プロジェクト履歴がわかりやすく、各変更の意図が明確]
[必要に応じて特定のコミットだけをロールバックすることが可能]
