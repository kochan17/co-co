# 日本語コミットパターン集

## よく使うパターン

### 機能追加パターン

```
新機能名を追加

新しい機能を実装した。以下の変更を含む：
- 新しいコンポーネント「ComponentName」を作成
- APIエンドポイント /api/feature を追加
- ユーザーが〇〇できるようになった
```

### バグ修正パターン

```
バグを修正：バグの内容

問題：[何が起こっていたか]
原因：[なぜそれが起こっていたか]
対策：[どのように修正したか]
```

例：
```
ログイン失敗時のエラーメッセージを修正

問題：ネットワーク接続エラー時に空のエラーメッセージが表示されていた
原因：エラーハンドリングで例外メッセージを取得していなかった
対策：エラーハンドリング処理に詳細なメッセージ表示を追加
```

### UIデザイン・スタイル変更パターン

```
ヘッダーのUIをリデザイン

以下のコンポーネントを変更：
- ロゴのサイズと配置を調整
- ナビゲーションメニューのスタイルを更新
- ダークモード対応を追加
```

### リファクタリングパターン

```
関数の整理：ComponentA と ComponentB をリファクタリング

重複していたロジックを共通の utility 関数に抽出した。
機能自体は変わらず、保守性が向上した。
```

### テスト追加パターン

```
テストを追加：ユーザー認証ロジック

以下のテストケースを追加：
- 正しい認証情報でのログイン成功
- 不正な認証情報でのログイン失敗
- セッションタイムアウト時の処理
```

### ドキュメント更新パターン

```
READMEを更新：セットアップ手順

インストール方法とセットアップ手順を追加した。
新しい開発者がすぐに開発を始められるようになった。
```

### 依存関係更新パターン

```
パッケージを更新：React 18.x にアップグレード

React を 18.2.0 にアップグレードし、新しい API を活用した。
パフォーマンスが向上し、サスペンス機能が使用可能になった。
```

### 設定変更パターン

```
環境設定を追加：本番環境用の設定

.env.production ファイルを追加して、本番環境での動作設定を定義した。
API エンドポイント、キャッシュ設定など本番環境に最適化。
```

## 複数変更の場合

複数の異なる機能や修正がある場合は、各々を別のコミットに分割するのが基本です：

```
1番目のコミット：
機能Aを実装

2番目のコミット：
機能Bを実装

3番目のコミット：
機能Aと機能Bを統合するテストを追加
```

## 避けるべきパターン

❌ **曖昧なメッセージ**
```
いろいろ修正
ファイル更新
WIP（未完成の状態のコミット）
```

❌ **技術的すぎるメッセージ**
```
props の型定義を useCallback でラップ
```
（理由：誰が見てもわかる表現ではない）

❌ **短すぎるメッセージ**
```
修正
追加
```

❌ **タイムスタンプやIDのみ**
```
2024-02-04
Task-123
```

## フロー例

プロジェクトで 3 つの異なる変更がある場合：

1. **認証機能の改善**（3ファイル）
   - ステージ：認証関連ファイルのみ
   - コミットメッセージ：「認証トークンの有効期限チェックを強化」

2. **UIコンポーネントの最適化**（2ファイル）
   - ステージ：UIコンポーネント関連ファイルのみ
   - コミットメッセージ：「ボタンコンポーネントのアクセシビリティを改善」

3. **テスト追加**（1ファイル）
   - ステージ：テストファイル
   - コミットメッセージ：「テストを追加：ログイン機能の境界値テスト」

各変更が独立した意味のある単位になることで、
プロジェクト履歴が読みやすく、問題が発生した時のロールバックが容易になります。
